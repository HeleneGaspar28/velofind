<div class="col-md-10 mb-4">
  <div class="match-card bg-white border rounded-4 shadow-sm p-4">

    <!-- Two-column layout: Left content + Right image/buttons -->
    <div class="d-flex flex-wrap gap-4">

      <!-- LEFT: All text content -->
      <div class="flex-grow-1" style="min-width: 0;">
        <!-- Header -->
        <div class="mb-3">
          <div class="d-flex align-items-center gap-2">
            <h5 class="fw-bold mb-0">Match #<%= index + 1 %></h5>
            <span class="badge text-white px-2 py-1 rounded-2" style="background-color: red;">
              <%= match.match_score %>% match
            </span>
          </div>
          <small class="text-muted d-block mt-1">Found <%= time_ago_in_words(match.created_at) %> ago</small>
        </div>

        <!-- Match details -->
        <ul class="list-unstyled mb-0">
          <li class="d-flex align-items-center mb-3">
            <i class="fas fa-globe-americas me-3 text-muted"></i>
            <span class="fw-medium"><%= match.marketplace %></span>
          </li>
          <li class="d-flex align-items-center mb-3">
            <i class="fas fa-bicycle me-3 text-muted"></i>
            <span class="fw-medium"><%= match.brand %></span>
          </li>
          <li class="d-flex align-items-center mb-3">
            <i class="fas fa-tag me-3 text-muted"></i>
            <span class="fw-medium"><%= match.model.presence || "Unknown" %></span>
          </li>
          <!-- If frame number present, it will show the frame number -->
          <% if match.matched_fields&.include?("frame_number") && match.frame_number.present? %>
            <li class="d-flex align-items-center mb-3">
              <i class="fas fa-hashtag me-3 text-muted"></i>
              <span class="fw-medium"><%= match.frame_number %></span>
            </li>
          <% end %>
          <!-- If color present, it will show the color -->
          <% if match.matched_fields&.include?("color") && match.color.present? %>
            <li class="d-flex align-items-center mb-3">
              <i class="fas fa-palette me-3 text-muted"></i>
              <span class="fw-medium"><%= match.color %></span>
            </li>
          <% end %>
          <li class="d-flex align-items-center mb-3">
            <i class="fas fa-map-marker-alt me-3 text-muted"></i>
            <span class="fw-medium"><%= match.location %></span>
          </li>
          <li class="d-flex align-items-center mb-0">
            <i class="fas fa-check-circle me-3 text-muted"></i>
            <% if match.matched_fields.present? %>
              <% match.matched_fields.each do |field| %>
                <span class="badge bg-green-secondary me-1"><%= field.to_s.humanize %></span>
              <% end %>
            <% else %>
              <span class="text-muted">N/A</span>
            <% end %>
          </li>
        </ul>
      </div>

      <!-- RIGHT: Image + Buttons (vertically stacked) -->
      <div class="d-flex flex-column align-items-center" style="width: 250px;">

        <!-- Image -->
        <div class="bg-light rounded-4 w-100 d-flex justify-content-center align-items-center mb-3"
             style="height: 200px; padding: 8px; overflow: hidden;">
          <% if match.image_url.present? %>
            <img
              src="<%= match.image_url %>"
              alt="Bike image"
              class="img-fluid h-100"
              style="object-fit: cover; border-radius: 4px;"
            />
          <% else %>
            <div class="text-muted text-center w-100">No image available</div>
          <% end %>
        </div>

        <!-- Buttons -->
        <% if match.report.present? %>
          <div class="d-flex justify-content-between w-100" style="max-width: 400px;">
            <%= link_to "Report Stolen",
                new_bike_match_report_path(match.bike, match),
                class: "btn btn-danger w-50 me-1 text-nowrap px-1",
                style: "height: 40px;" %>

              <%= link_to "See Report",
                  bike_match_report_path(match.bike, match, match.report),
                  class: "btn btn-primary-custom w-50 ms-1 text-nowrap px-1 d-flex align-items-center justify-content-center text-center",
                  style: "height: 40px;" %>
          </div>
        <% else %>
          <div class="w-100">
            <%= link_to "Report Stolen",
                new_bike_match_report_path(match.bike, match),
                class: "btn btn-danger w-100 me-1 text-nowrap px-1",
                style: "height: 40px;" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
